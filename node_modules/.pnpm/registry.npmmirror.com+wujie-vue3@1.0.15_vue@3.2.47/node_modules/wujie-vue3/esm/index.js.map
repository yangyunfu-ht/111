{"version":3,"file":"index.js","names":["bus","preloadApp","startApp","rawStartApp","destroyApp","setupApp","h","defineComponent","wujieVueOptions","name","props","width","type","String","height","loading","HTMLElement","undefined","url","sync","Boolean","prefix","Object","alive","attrs","replace","Function","fetch","fiber","degrade","plugins","Array","beforeLoad","beforeMount","afterMount","beforeUnmount","afterUnmount","activated","deactivated","loadError","data","startAppQueue","Promise","resolve","mounted","$onAll","handleEmit","execStartApp","$watch","methods","event","args","$emit","el","$refs","wujie","console","log","then","destroy","beforeDestroy","$offAll","render","style","ref","WujieVue","install","app","component"],"sources":["../index.js"],"sourcesContent":["import { bus, preloadApp, startApp as rawStartApp, destroyApp, setupApp } from \"wujie\";\nimport { h, defineComponent } from \"vue\";\n\nconst wujieVueOptions = {\n  name: \"WujieVue\",\n  props: {\n    width: { type: String, default: \"\" },\n    height: { type: String, default: \"\" },\n    name: { type: String, default: \"\" },\n    loading: { type: HTMLElement, default: undefined },\n    url: { type: String, default: \"\" },\n    sync: { type: Boolean, default: undefined },\n    prefix: { type: Object, default: undefined },\n    alive: { type: Boolean, default: undefined },\n    props: { type: Object, default: undefined },\n    attrs: { type: Object, default: undefined },\n    replace: { type: Function, default: undefined },\n    fetch: { type: Function, default: undefined },\n    fiber: { type: Boolean, default: undefined },\n    degrade: { type: Boolean, default: undefined },\n    plugins: { type: Array, default: null },\n    beforeLoad: { type: Function, default: null },\n    beforeMount: { type: Function, default: null },\n    afterMount: { type: Function, default: null },\n    beforeUnmount: { type: Function, default: null },\n    afterUnmount: { type: Function, default: null },\n    activated: { type: Function, default: null },\n    deactivated: { type: Function, default: null },\n    loadError: { type: Function, default: null },\n  },\n  data() {\n    return {\n      startAppQueue: Promise.resolve(),\n    };\n  },\n  mounted() {\n    bus.$onAll(this.handleEmit);\n    this.execStartApp();\n    this.$watch(\n      () => this.name + this.url,\n      () => this.execStartApp()\n    );\n  },\n  methods: {\n    handleEmit(event, ...args) {\n      this.$emit(event, ...args);\n    },\n    async startApp() {\n      try {\n        await rawStartApp({\n          name: this.name,\n          url: this.url,\n          el: this.$refs.wujie,\n          loading: this.loading,\n          alive: this.alive,\n          fetch: this.fetch,\n          props: this.props,\n          attrs: this.attrs,\n          replace: this.replace,\n          sync: this.sync,\n          prefix: this.prefix,\n          fiber: this.fiber,\n          degrade: this.degrade,\n          plugins: this.plugins,\n          beforeLoad: this.beforeLoad,\n          beforeMount: this.beforeMount,\n          afterMount: this.afterMount,\n          beforeUnmount: this.beforeUnmount,\n          afterUnmount: this.afterUnmount,\n          activated: this.activated,\n          deactivated: this.deactivated,\n          loadError: this.loadError,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    execStartApp() {\n      this.startAppQueue = this.startAppQueue.then(this.startApp);\n    },\n    destroy() {\n      destroyApp(this.name);\n    },\n  },\n  beforeDestroy() {\n    bus.$offAll(this.handleEmit);\n  },\n  render() {\n    return h(\"div\", {\n      style: {\n        width: this.width,\n        height: this.height,\n      },\n      ref: \"wujie\",\n    });\n  },\n};\n\nconst WujieVue = defineComponent(wujieVueOptions);\n\nWujieVue.setupApp = setupApp;\nWujieVue.preloadApp = preloadApp;\nWujieVue.bus = bus;\nWujieVue.destroyApp = destroyApp;\nWujieVue.install = function (app) {\n  app.component(\"WujieVue\", WujieVue);\n};\n\nexport default WujieVue;\n"],"mappings":"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"}